<header x-data="{ mobileMenuOpen: false }" class="bg-white shadow-md">
  <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-20">
      
      <!-- Logo -->
      <div class="flex items-center gap-2">
        <a href="/">
          <img src="#" alt="Changa Logo" class="h-10 w-auto">
        </a>
        <span class="text-xl font-bold text-green-600">Changa</span>
      </div>

      <!-- Desktop Menu -->
      <nav class="hidden md:flex items-center space-x-6">
        <a href="/" class="text-gray-700 hover:text-green-600 font-medium transition">Home</a>
        <a href="/about/" class="text-gray-700 hover:text-green-600 font-medium transition">About</a>

        <!-- Features Dropdown -->
        <div x-data="{ open: false }" @mouseenter="open = true" @mouseleave="open = false" class="relative">
          <button @click="open = !open" class="flex items-center gap-1 text-gray-700 hover:text-green-600 font-medium transition">
            Features
            <svg class="h-5 w-5 text-gray-400" :class="{ 'rotate-180': open }" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.17l3.71-3.94a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z" clip-rule="evenodd"/>
            </svg>
          </button>
          <div x-show="open" x-cloak @click.away="open = false" class="absolute left-0 z-10 mt-2 w-64 bg-white rounded-lg shadow-lg ring-1 ring-gray-100 py-2">
            <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-green-50 hover:text-green-600">Savings & Goals</a>
            <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-green-50 hover:text-green-600">Loans & AI Scoring</a>
            <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-green-50 hover:text-green-600">Contributions & Reports</a>
            <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-green-50 hover:text-green-600">Events & Meetings</a>
            <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-green-50 hover:text-green-600">M-Pesa Integration</a>
          </div>
        </div>

        <a href="/pricing/" class="text-gray-700 hover:text-green-600 font-medium transition">Pricing</a>
        <a href="/contact/" class="text-gray-700 hover:text-green-600 font-medium transition">Contact</a>

        {% if user.is_authenticated %}
          <a href="/dashboard/" class="text-green-700 hover:text-red-600 font-semibold">Dashboard</a>
        {% else %}
          <a href="/login/" class="ml-2 border border-green-600 px-4 py-1.5 rounded-lg text-green-700 hover:bg-green-600 hover:text-white transition font-medium">Login</a>
        {% endif %}
      </nav>

      <!-- CTAs & Mobile Toggle -->
      <div class="flex items-center">
        <a href="#" class="hidden md:inline-block bg-green-600 text-white px-5 py-2.5 rounded-lg hover:bg-green-700 transition shadow-md text-sm font-semibold">Start Free Trial</a>
        <a href="#" class="hidden md:inline-block ml-3 bg-white text-green-700 border border-green-600 px-5 py-2.5 rounded-lg hover:bg-green-50 transition shadow-md text-sm font-semibold">Book Demo</a>

        <!-- Mobile Menu Toggle -->
        <button @click="mobileMenuOpen = !mobileMenuOpen" class="ml-4 md:hidden p-2 rounded-md text-gray-700 hover:bg-gray-100 focus:ring-2 focus:ring-green-500">
          <svg x-show="!mobileMenuOpen" class="h-6 w-6" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
          <svg x-show="mobileMenuOpen" x-cloak class="h-6 w-6" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div x-show="mobileMenuOpen" x-cloak class="md:hidden px-4 pt-4 pb-6 bg-white space-y-2 shadow-md">
    <a href="/" class="block text-gray-700 hover:text-green-600 font-medium">Home</a>
    <a href="/about/" class="block text-gray-700 hover:text-green-600 font-medium">About</a>
    <div class="border-t pt-2">
      <p class="text-gray-600 font-semibold mb-1">Features</p>
      <a href="#" class="block text-sm text-gray-700 hover:text-green-600">Savings & Goals</a>
      <a href="#" class="block text-sm text-gray-700 hover:text-green-600">Loans & AI Scoring</a>
      <a href="#" class="block text-sm text-gray-700 hover:text-green-600">Contributions & Reports</a>
      <a href="#" class="block text-sm text-gray-700 hover:text-green-600">Events & Meetings</a>
      <a href="#" class="block text-sm text-gray-700 hover:text-green-600">M-Pesa Integration</a>
    </div>
    <a href="/pricing/" class="block text-gray-700 hover:text-green-600 font-medium">Pricing</a>
    <a href="/contact/" class="block text-gray-700 hover:text-green-600 font-medium">Contact</a>
    {% if user.is_authenticated %}
      <a href="/dashboard/" class="block text-green-700 font-medium hover:text-red-600">Dashboard</a>
    {% else %}
      <a href="/login/" class="block bg-green-600 text-white px-4 py-2 rounded-lg text-center hover:bg-green-700">Login</a>
    {% endif %}
    <a href="#" class="block bg-orange-500 text-white px-4 py-2 rounded-lg text-center hover:bg-orange-600">Start Free Trial</a>
  </div>
</header>
